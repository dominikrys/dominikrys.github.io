<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf | Dominik Rys</title>
<meta name="keywords" content="devops, security, docker, influxdb, grafana, traefik" />
<meta name="description" content="This post is also hosted on the Corda Blog. The main goal behind this post was to provide an easily accessible high-level overview on monitoring Corda nodes. It also showcases part of what I&rsquo;ve done during my summer internship at R3.
 Intro Here at R3, we have a cluster of Corda nodes that we use for performance testing. We have developed a performance testing suite that enables us to establish baseline numbers, quantify improvements from new features, and identify regressions.">
<meta name="author" content="">
<link rel="canonical" href="https://dominikrys.com/posts/monitoring-corda-nodes/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.35cd0f65a15cafa92372b8313deef5960aae04b90ad722f2bbf509eb0468137e.css" integrity="sha256-Nc0PZaFcr6kjcrgxPe71lgquBLkK1yLyu/UJ6wRoE34=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://dominikrys.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://dominikrys.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://dominikrys.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://dominikrys.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://dominikrys.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.86.1" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-FZL8HVTHR8"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-FZL8HVTHR8', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf" />
<meta property="og:description" content="This post is also hosted on the Corda Blog. The main goal behind this post was to provide an easily accessible high-level overview on monitoring Corda nodes. It also showcases part of what I&rsquo;ve done during my summer internship at R3.
 Intro Here at R3, we have a cluster of Corda nodes that we use for performance testing. We have developed a performance testing suite that enables us to establish baseline numbers, quantify improvements from new features, and identify regressions." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dominikrys.com/posts/monitoring-corda-nodes/" />
<meta property="og:image" content="https://dominikrys.com/img/cover.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-21T16:52:48&#43;01:00" />
<meta property="article:modified_time" content="2020-09-21T16:52:48&#43;01:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://dominikrys.com/img/cover.png" />
<meta name="twitter:title" content="Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf"/>
<meta name="twitter:description" content="This post is also hosted on the Corda Blog. The main goal behind this post was to provide an easily accessible high-level overview on monitoring Corda nodes. It also showcases part of what I&rsquo;ve done during my summer internship at R3.
 Intro Here at R3, we have a cluster of Corda nodes that we use for performance testing. We have developed a performance testing suite that enables us to establish baseline numbers, quantify improvements from new features, and identify regressions."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://dominikrys.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf",
      "item": "https://dominikrys.com/posts/monitoring-corda-nodes/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf",
  "name": "Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf",
  "description": "This post is also hosted on the Corda Blog. The main goal behind this post was to provide an easily accessible high-level overview on monitoring Corda nodes. It also showcases part of what I\u0026rsquo;ve done during my summer internship at R3.\n Intro Here at R3, we have a cluster of Corda nodes that we use for performance testing. We have developed a performance testing suite that enables us to establish baseline numbers, quantify improvements from new features, and identify regressions.",
  "keywords": [
    "devops", "security", "docker", "influxdb", "grafana", "traefik"
  ],
  "articleBody": " This post is also hosted on the Corda Blog. The main goal behind this post was to provide an easily accessible high-level overview on monitoring Corda nodes. It also showcases part of what I’ve done during my summer internship at R3.\n Intro Here at R3, we have a cluster of Corda nodes that we use for performance testing. We have developed a performance testing suite that enables us to establish baseline numbers, quantify improvements from new features, and identify regressions.\nWe recently decided to invest some effort in improving the observability of the overall system so that we could identify regressions and analyse their root cause more efficiently and with less manual work. There is a wealth of metrics exposed by Corda nodes via JMX that can be inspected using tools such as Hawtio (as described in the Corda docs). However, this approach requires plenty of manual intervention and the prerequisite of the test actively running during inspection times.\n Corda JMX metrics visible in Hawtio\n  We had to set up a monitoring infrastructure that would allow us to:\n  Collect the metrics exposed by our Corda nodes via JMX.\n  Collect the metrics not exposed via JMX, such as disk IO and network activity.\n  Store the collected metrics in a centralised database.\n  Visualise, filter, and compare metrics from different time windows using a front end accessible from a web browser.\n  Monitoring is a core aspect of operating Corda nodes efficiently. Therefore, in this post we give you a quick overview of the technologies available and their trade-offs. We also walk you through the capabilities and the architecture of our solution. The described work has been performed on Corda 4.5, but the high-level architecture is really version-agnostic. We hope this can help those of you getting started with monitoring!\nHosting the monitoring infrastructure The first step was to decide how to host the monitoring infrastructure, as that would greatly impact the choice of other tools that we could use. Ultimately it came down to either using a third-party managed service or deploying the infrastructure ourselves in the public cloud.\nThird-party managed services This would be a great option if we wanted a scalable solution without us having to spend too much time setting up the infrastructure and managing it, or if it was to support production workloads that would have strict requirements for high availability. Given that we only wanted to monitor the nodes in our cluster and didn’t intend for it to scale beyond that, using a third-party service wouldn’t have been cost-effective as it would have provided many more features than were necessary for us.\nWe also wanted the ability to have multiple users access dashboards simultaneously, and the possibility for user authentication. These features were only accessible in the higher tiers of such services, which provide much more storage and bandwidth than we required.\nSelf-hosting We ended up going down the path of hosting the monitoring infrastructure ourselves in Microsoft Azure. The most popular tools for setting up monitoring solutions provide open source offerings so this was a viable option. It also has the added benefits of giving us full control over the infrastructure and knowing the exact running costs.\nComparison of tools As we chose to self-host the monitoring infrastructure, we had the liberty of choosing from the multitude of open source tools available to set up our infrastructure. We carefully considered which tools to use so that the monitoring infrastructure wouldn’t require much effort to maintain in the long run.\nEffectively the monitoring infrastructure can be split up into three parts:\n  A metric collection agent.\n  A time-series database (TSDB).\n  A front end for visualising and querying the TSDB.\n  The descriptions of each part below provide details about the tool we chose to use, followed by alternatives that we had also considered.\nMetric collection agent  ⭐ Telegraf— a lightweight open source server agent that can collect and write metrics to and from different sources. It’s plug-in driven so we could easily set it up using the provided jolokia2 plug-in to collect the metrics exposed through JMX from our Corda nodes.\nTelegraf also provides plug-ins that allow for monitoring various system metrics which aren’t available through JMX, such as disk IO and networking usage. In our case, it was so convenient to configure that we also deployed it on our Corda node databases with the relevant PostgreSQL and SQL Server plug-ins.\nOther options — we also considered Prometheus JMX exporter, jmx2graphite, and jmxtrans. The issue with these is that they are all limited to which metrics they can record and where they can send them to. Telegraf can provide essentially the same functionality as those tools and allows for extensibility, while greatly reducing the number of tools required for maintenance.\nTime-series database  ⭐ InfluxDB — an open source TSDB from InfluxData, who also develop Telegraf. It’s easy to install on many different platforms and can be interacted with using the SQL-like InfluxQL query language.\nThis is the TSDB we ended up using. So far it’s been working well, but a slight gripe with it is that the default query language (InfluxQL) is not quite powerful enough for certain tasks, such as performing calculations on data over different time windows. This is remedied by using InfluxData’s new Flux query language, albeit at the cost of convenience due to a lack of simplified GUI for it in TSDB front ends — the queries have to be written in plain text. Before choosing InfluxDB we’d recommend checking this aggregate GitHub issue to see if you’d heavily rely on any query operators that have not yet been implemented in InfluxQL.\nOverall, Flux is still significantly more powerful than Prometheus’ and Graphite’s query languages. InfluxDB can be the best option if you don’t mind sacrificing some ease of use sometimes for the ability to write (almost) any query imaginable.\n Prometheus — another popular open source TSDB, which is entirely community-driven. It uses a similar data compression algorithm to InfluxDB. The query language (PromQL) is more robust than InfluxQL so you can do more out of the box, although it doesn’t resemble any particular language so requires learning from scratch.\nOne of the biggest differences in Prometheus compared to other TSDBs is that it pulls instead of pushing metrics. This has some advantages, but also requires additional setting-up on the machines that run your Corda nodes to allow Prometheus to pick up the exported metrics, which entails opening extra ports and setting up firewall rules.\nIt was tough choosing between Prometheus and InfluxDB, but ultimately we went with InfluxDB due to it being maintained by the same people as Telegraf, the potential to write complex queries using Flux and requiring less setup to collect metrics from our Corda nodes.\n Graphite — the grandaddy of modern TSDBs. Graphite has been around for longer than Prometheus and InfluxDB, so it’s a mature and tested tool. The query language resembles some programming languages so it’s easy to pick up, and it can do more than InfluxQL and PromQL thanks to the huge selection of functions that have been developed over the years.\nBeing the oldest of the bunch has its disadvantages though, most notably that the performance is lacklustre compared to InfluxDB which would have to be accounted for by using a more powerful host VM. Installing Graphite can also be a pain due to its many dependencies if it’s not deployed in Docker (inspiring projects such as Synthesize that are meant to make the process easier).\nFront end for visualising and querying the TSDB  Example Grafana Dashboard\n  ⭐ Grafana — an open source tool for interactively visualising data from various data sources. Grafana is by far the most popular tool for interacting with TSDBs with over 1200 contributors on GitHub and a very active community forum. There are many plug-ins available for it, it integrates well with many other services for alerting and authentication, and it makes creating aesthetically pleasing dashboards a breeze.\n Example Chronograf Dashboard\n  Chronograf — an open source tool for interacting and visualising data from InfluxDB. Chronograf is very well suited for setups where other products from InfluxData are used, as it’s better integrated with them compared to Grafana. This could have been a great option if we also used Kapacitor as a real-time streaming data processing engine from InfluxData, to complete their “TICK” stack.\nGiven that Chronograf has fewer features than Grafana and is significantly less popular, which can make getting support for it more difficult, we went with Grafana.\nExtra considerations Why deploy in Docker?  As all tools we chose provided official Docker images, we decided to deploy our monitoring infrastructure as a Docker Compose application in an Azure VM. This has many benefits:\n  Deploying the monitoring infrastructure is a one-step process and is easily reproducible.\n  Updating and downgrading individual services is straightforward — just adjust the version of the Docker images!\n  It’s easy to manage each container’s data as it’s kept in separate Docker volumes.\n  The solution can be easily tested locally and will behave the same locally as on a production server.\n  Securing the monitoring infrastructure  To encrypt the traffic coming in and out of our monitoring infrastructure, we used Traefik which can automatically renew and obtain TLS certificates for our monitoring infrastructure from Let’s Encrypt. Traefik is an open source edge router that acts as a reverse proxy for our Docker containers. It can be deployed using official Docker images, so it integrates perfectly into our Docker Compose application.\nWe defined separate Traefik services and routers for Grafana and InfluxDB that take care of appropriate routing, HTTP/HTTPS redirection, and TLS configuration. This was all done in a declarative way using labels in our Docker compose file.\nGrafana supports user authentication, which can be integrated with many different services including Azure and GitHub. This also allows for easy management of permissions of the users accessing our Grafana dashboards.\nDeployment of Telegraf Telegraf can be installed on the machines running Corda in a variety of ways and works as a stand-alone tool. Setting it up is relatively straightforward, so you can choose whichever installation method most suits your setup.\nComplete infrastructure architecture The complete architecture of our infrastructure looks as follows:\n TLS is terminated at our reverse proxy (Traefik). This means that traffic between the proxy and Grafana/InfluxDB is not encrypted, but this isn’t an issue since all these services are running in a single secured machine.\nFinal result We set up a Grafana dashboard with metrics for each Corda node in our cluster. The dashboard features high-level flow metrics first, followed by internal operation metrics (P2P, caches), and finally system-level metrics (JVM, disk IO, network). A part of this dashboard is shown below.\n  We also have a dashboard with a summary of the results from our performance testing suite, which helps us inspect the results quickly and identify potential regressions. A part of it that shows throughput numbers for some of our test cases is shown below. This is made possible by sending data from our test suite running JMeter to InfluxDB using the JMeter InfluxDB Backend Listener.\n The “Difference” column displays the results of a Flux query performed on our InfluxDB database, repeated for every test case using Grafana’s variable feature. It calculates the difference in results of each test case between the currently specified run and a run that happened a certain time ago (in this example 24 hours ago).\nConclusion A complete solution for monitoring Corda nodes can be set up entirely using open source tools without compromises. Many of the tools can be mixed and matched, so it’s possible to adjust the foundation described in this post to better fit your individual needs and existing setup.\nOne of the most impactful choices to be made when setting up a monitoring solution for Corda nodes is the choice of TSDB, as that will greatly affect the performance and usability of your dashboards. InfluxDB and Prometheus are strong TSDB options which have many discerning features that can make one more favourable over the other, depending on your requirements.\nFor more information on monitoring Corda nodes, check the following articles:\n  Monitoring Corda Nodes With Prometheus, Grafana and ELK on Docker\n  Monitoring Corda Nodes using Prometheus and Grafana\n  Monitoring Corda Nodes (Part 1)\n  The Corda documentation is also an amazing resource:\n  Node metrics\n  Node monitoring and logging\n  Want to learn more about building awesome blockchain applications on Corda? Be sure to visit corda.net, check out our community page to learn how to connect with other Corda developers, and sign up for one of our newsletters for the latest updates.\n— Dominik Rys is a Software Engineer Intern at R3, an enterprise blockchain software firm working with a global ecosystem of more than 350 participants across multiple industries from both the private and public sectors to develop on Corda, its open source blockchain platform, and Corda Enterprise, a commercial version of Corda for enterprise usage.\n",
  "wordCount" : "2153",
  "inLanguage": "en",
  "image":"https://dominikrys.com/img/cover.png","datePublished": "2020-09-21T16:52:48+01:00",
  "dateModified": "2020-09-21T16:52:48+01:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dominikrys.com/posts/monitoring-corda-nodes/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Dominik Rys",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dominikrys.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://dominikrys.com" accesskey="h" title="Dominik Rys (Alt + H)">Dominik Rys</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://dominikrys.com/archives" title="Post Archive">
                    <span>Post Archive</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf
    </h1>
    <div class="post-meta">September 21, 2020&nbsp;·&nbsp;11 min
</div>
  </header> 
<figure class="entry-cover">
        <img loading="lazy" srcset="https://dominikrys.com/posts/monitoring-corda-nodes/img/cover_hu85cbe62df0683a1fd82bc6f404ee234d_330085_360x0_resize_box_3.png 360w ,https://dominikrys.com/posts/monitoring-corda-nodes/img/cover_hu85cbe62df0683a1fd82bc6f404ee234d_330085_480x0_resize_box_3.png 480w ,https://dominikrys.com/posts/monitoring-corda-nodes/img/cover_hu85cbe62df0683a1fd82bc6f404ee234d_330085_720x0_resize_box_3.png 720w ,https://dominikrys.com/posts/monitoring-corda-nodes/img/cover_hu85cbe62df0683a1fd82bc6f404ee234d_330085_1080x0_resize_box_3.png 1080w ,https://dominikrys.com/posts/monitoring-corda-nodes/img/cover_hu85cbe62df0683a1fd82bc6f404ee234d_330085_1500x0_resize_box_3.png 1500w ,https://dominikrys.com/posts/monitoring-corda-nodes/img/cover.png 3509w"
            sizes="(min-width: 768px) 720px, 100vw" src="https://dominikrys.com/posts/monitoring-corda-nodes/img/cover.png" alt="Cover" />
        
</figure><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <div class="details">Table of Contents</div>
        </summary>
        <div class="inner"><ul>
                <li>
                    <a href="#intro" aria-label="Intro">Intro</a></li>
                <li>
                    <a href="#hosting-the-monitoring-infrastructure" aria-label="Hosting the monitoring infrastructure">Hosting the monitoring infrastructure</a><ul>
                        
                <li>
                    <a href="#third-party-managed-services" aria-label="Third-party managed services">Third-party managed services</a></li>
                <li>
                    <a href="#self-hosting" aria-label="Self-hosting">Self-hosting</a></li></ul>
                </li>
                <li>
                    <a href="#comparison-of-tools" aria-label="Comparison of tools">Comparison of tools</a><ul>
                        
                <li>
                    <a href="#metric-collection-agent" aria-label="Metric collection agent">Metric collection agent</a></li>
                <li>
                    <a href="#time-series-database" aria-label="Time-series database">Time-series database</a></li>
                <li>
                    <a href="#front-end-for-visualising-and-querying-the-tsdb" aria-label="Front end for visualising and querying the TSDB">Front end for visualising and querying the TSDB</a></li></ul>
                </li>
                <li>
                    <a href="#extra-considerations" aria-label="Extra considerations">Extra considerations</a><ul>
                        
                <li>
                    <a href="#why-deploy-in-docker" aria-label="Why deploy in Docker?">Why deploy in Docker?</a></li>
                <li>
                    <a href="#securing-the-monitoring-infrastructure" aria-label="Securing the monitoring infrastructure">Securing the monitoring infrastructure</a></li>
                <li>
                    <a href="#deployment-of-telegraf" aria-label="Deployment of Telegraf">Deployment of Telegraf</a></li></ul>
                </li>
                <li>
                    <a href="#complete-infrastructure-architecture" aria-label="Complete infrastructure architecture">Complete infrastructure architecture</a></li>
                <li>
                    <a href="#final-result" aria-label="Final result">Final result</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><blockquote>
<p><strong>This post is also hosted on the <a href="https://www.corda.net/blog/monitoring-corda-nodes-using-grafana-influxdb-and-telegraf/">Corda Blog</a>.</strong> The main goal behind this post was to provide an easily accessible high-level overview on monitoring Corda nodes. It also showcases part of what I&rsquo;ve done during my summer internship at R3.</p>
</blockquote>
<h2 id="intro">Intro<a hidden class="anchor" aria-hidden="true" href="#intro">#</a></h2>
<p>Here at R3, we have a cluster of Corda nodes that we use for performance testing. We have developed a <a href="https://docs.corda.net/docs/corda-enterprise/performance-testing/toc-tree.html">performance testing suite</a> that enables us to establish baseline numbers, quantify improvements from new features, and identify regressions.</p>
<p>We recently decided to invest some effort in improving the observability of the overall system so that we could identify regressions and analyse their root cause more efficiently and with less manual work. There is <a href="https://docs.corda.net/docs/corda-enterprise/node-metrics.html">a wealth of metrics exposed by Corda nodes via JMX</a> that can be inspected using tools such as <a href="https://hawt.io/">Hawtio</a> (as <a href="https://docs.corda.net/docs/corda-enterprise/node/operating/monitoring-logging.html">described in the Corda docs</a>). However, this approach requires plenty of manual intervention and the prerequisite of the test actively running during inspection times.</p>
<figure class="align-center ">
    <img loading="lazy" src="img/hawtio.png#center"
         alt="Corda JMX metrics visible in Hawtio"/> <figcaption>
            <p>Corda JMX metrics visible in Hawtio</p>
        </figcaption>
</figure>

<p>We had to set up a monitoring infrastructure that would allow us to:</p>
<ul>
<li>
<p>Collect the metrics exposed by our Corda nodes via JMX.</p>
</li>
<li>
<p>Collect the metrics not exposed via JMX, such as disk IO and network activity.</p>
</li>
<li>
<p>Store the collected metrics in a centralised database.</p>
</li>
<li>
<p>Visualise, filter, and compare metrics from different time windows using a front end accessible from a web browser.</p>
</li>
</ul>
<p>Monitoring is a core aspect of operating Corda nodes efficiently. Therefore, in this post we give you a quick overview of the technologies available and their trade-offs. We also walk you through the capabilities and the architecture of our solution. The described work has been performed on Corda 4.5, but the high-level architecture is really version-agnostic. We hope this can help those of you getting started with monitoring!</p>
<h2 id="hosting-the-monitoring-infrastructure">Hosting the monitoring infrastructure<a hidden class="anchor" aria-hidden="true" href="#hosting-the-monitoring-infrastructure">#</a></h2>
<p>The first step was to decide how to host the monitoring infrastructure, as that would greatly impact the choice of other tools that we could use. Ultimately it came down to either using a third-party managed service or deploying the infrastructure ourselves in the public cloud.</p>
<h3 id="third-party-managed-services">Third-party managed services<a hidden class="anchor" aria-hidden="true" href="#third-party-managed-services">#</a></h3>
<p>This would be a great option if we wanted a scalable solution without us having to spend too much time setting up the infrastructure and managing it, or if it was to support production workloads that would have strict requirements for high availability. Given that we only wanted to monitor the nodes in our cluster and didn’t intend for it to scale beyond that, using a third-party service wouldn’t have been cost-effective as it would have provided many more features than were necessary for us.</p>
<p>We also wanted the ability to have multiple users access dashboards simultaneously, and the possibility for user authentication. These features were only accessible in the higher tiers of such services, which provide much more storage and bandwidth than we required.</p>
<h3 id="self-hosting">Self-hosting<a hidden class="anchor" aria-hidden="true" href="#self-hosting">#</a></h3>
<p>We ended up going down the path of hosting the monitoring infrastructure ourselves in Microsoft Azure. The most popular tools for setting up monitoring solutions provide open source offerings so this was a viable option. It also has the added benefits of giving us full control over the infrastructure and knowing the exact running costs.</p>
<h2 id="comparison-of-tools">Comparison of tools<a hidden class="anchor" aria-hidden="true" href="#comparison-of-tools">#</a></h2>
<p>As we chose to self-host the monitoring infrastructure, we had the liberty of choosing from the multitude of open source tools available to set up our infrastructure. We carefully considered which tools to use so that the monitoring infrastructure wouldn’t require much effort to maintain in the long run.</p>
<p>Effectively the monitoring infrastructure can be split up into three parts:</p>
<ol>
<li>
<p>A metric collection agent.</p>
</li>
<li>
<p>A time-series database (TSDB).</p>
</li>
<li>
<p>A front end for visualising and querying the TSDB.</p>
</li>
</ol>
<p>The descriptions of each part below provide details about the tool we chose to use, followed by alternatives that we had also considered.</p>
<h3 id="metric-collection-agent">Metric collection agent<a hidden class="anchor" aria-hidden="true" href="#metric-collection-agent">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="img/telegraf-logo.png#center"
         alt="Telegraf Logo"/> 
</figure>

<p>⭐ <a href="https://www.influxdata.com/time-series-platform/telegraf"><strong>Telegraf</strong></a>— a lightweight open source server agent that <a href="https://docs.influxdata.com/telegraf/latest/plugins/">can collect and write metrics to and from different sources</a>. It’s plug-in driven so we could easily set it up using the provided <a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/jolokia2">jolokia2 plug-in</a> to collect the metrics exposed through JMX from our Corda nodes.</p>
<p>Telegraf also provides plug-ins that allow for monitoring various system metrics which aren’t available through JMX, such as disk IO and networking usage. In our case, it was so convenient to configure that we also deployed it on our <a href="https://docs.corda.net/docs/corda-os/node-database.html">Corda node databases</a> with the relevant <a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/postgresql">PostgreSQL</a> and <a href="https://github.com/influxdata/telegraf/tree/master/plugins/inputs/sqlserver">SQL Server</a> plug-ins.</p>
<p><strong>Other options</strong> — we also considered <a href="https://github.com/prometheus/jmx_exporter"><strong>Prometheus JMX exporter</strong></a>, <a href="https://github.com/logzio/jmx2graphite"><strong>jmx2graphite</strong></a>, and <a href="https://github.com/jmxtrans/jmxtrans"><strong>jmxtrans</strong></a>. The issue with these is that they are all limited to which metrics they can record and where they can send them to. Telegraf can provide essentially the same functionality as those tools and allows for extensibility, while greatly reducing the number of tools required for maintenance.</p>
<h3 id="time-series-database">Time-series database<a hidden class="anchor" aria-hidden="true" href="#time-series-database">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="img/influxdb-logo.png#center"
         alt="InfluxDB Logo"/> 
</figure>

<p>⭐ <a href="https://www.influxdata.com/products/influxdb-overview/"><strong>InfluxDB</strong></a> — an open source TSDB from InfluxData, who also develop Telegraf. It’s <a href="https://docs.influxdata.com/influxdb/v1.8/introduction/install/">easy to install on many different platforms</a> and can be interacted with using the SQL-like <a href="https://docs.influxdata.com/influxdb/v1.8/query_language/">InfluxQL</a> query language.</p>
<p>This is the TSDB we ended up using. So far it’s been working well, but a slight gripe with it is that the default query language (InfluxQL) is not quite powerful enough for certain tasks, such as performing calculations on data over different time windows. This is remedied by using InfluxData’s new <a href="https://www.influxdata.com/products/flux">Flux</a> query language, albeit at the cost of convenience due to a lack of simplified GUI for it in TSDB front ends — the queries have to be written in plain text. Before choosing InfluxDB we’d recommend checking <a href="https://github.com/influxdata/influxdb/issues/5930">this aggregate GitHub issue</a> to see if you’d heavily rely on any query operators that have not yet been implemented in InfluxQL.</p>
<p>Overall, Flux is still significantly more powerful than Prometheus’ and Graphite’s query languages. InfluxDB can be the best option if you don’t mind sacrificing some ease of use sometimes for the ability to write (almost) any query imaginable.</p>
<figure class="align-center ">
    <img loading="lazy" src="img/prometheus-logo.png#center"
         alt="Prometheus Logo"/> 
</figure>

<p><a href="https://prometheus.io"><strong>Prometheus</strong></a> — another popular open source TSDB, which is entirely community-driven. It uses a similar <a href="https://prometheus.io/docs/introduction/comparison/#summary-0">data compression algorithm to InfluxDB</a>. The query language (<a href="https://prometheus.io/docs/prometheus/latest/querying/basics">PromQL</a>) is more robust than InfluxQL so you can do more out of the box, although it doesn’t resemble any particular language so requires learning from scratch.</p>
<p>One of the biggest differences in Prometheus compared to other TSDBs is that it <a href="https://prometheus.io/docs/introduction/faq/#why-do-you-pull-rather-than-push">pulls instead of pushing metrics</a>. This has some advantages, but also requires additional setting-up on the machines that run your Corda nodes to allow Prometheus to pick up the exported metrics, which entails opening extra ports and setting up firewall rules.</p>
<p>It was tough choosing between Prometheus and InfluxDB, but ultimately we went with InfluxDB due to it being maintained by the same people as Telegraf, the potential to write complex queries using Flux and requiring less setup to collect metrics from our Corda nodes.</p>
<figure class="align-center ">
    <img loading="lazy" src="img/graphite-logo.png#center"
         alt="Graphite Logo"/> 
</figure>

<p><a href="https://graphiteapp.org"><strong>Graphite</strong></a> — the grandaddy of modern TSDBs. Graphite has been around for longer than Prometheus and InfluxDB, so it’s a mature and tested tool. The query language resembles some programming languages so it’s easy to pick up, and it can do more than InfluxQL and PromQL thanks to the huge selection of functions that have been developed over the years.</p>
<p>Being the oldest of the bunch has its disadvantages though, most notably that the <a href="https://www.influxdata.com/blog/influxdb-outperforms-graphite-in-time-series-data-metrics-benchmark">performance is lacklustre compared to InfluxDB</a> which would have to be accounted for by using a more powerful host VM. Installing Graphite can also be a pain due to its <a href="https://graphite.readthedocs.io/en/latest/install.html#dependencies">many dependencies</a> if it’s not deployed in Docker (inspiring projects such as <a href="https://github.com/obfuscurity/synthesize/">Synthesize</a> that are meant to make the process easier).</p>
<h3 id="front-end-for-visualising-and-querying-the-tsdb">Front end for visualising and querying the TSDB<a hidden class="anchor" aria-hidden="true" href="#front-end-for-visualising-and-querying-the-tsdb">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="img/example-grafana-dashboard.png#center"
         alt="Example Grafana Dashboard"/> <figcaption>
            <p>Example Grafana Dashboard</p>
        </figcaption>
</figure>

<p>⭐ <a href="https://grafana.com"><strong>Grafana</strong></a> — an open source tool for interactively visualising data from various data sources. Grafana is by far the most popular tool for interacting with TSDBs with over <a href="https://github.com/grafana/grafana">1200 contributors on GitHub</a> and a very active <a href="https://community.grafana.com/">community forum</a>. There are <a href="https://grafana.com/grafana/plugins">many plug-ins available for it</a>, it integrates well with many other services for <a href="https://grafana.com/docs/grafana/latest/alerting/notifications/">alerting</a> and <a href="https://grafana.com/docs/grafana/latest/auth/overview/">authentication</a>, and it makes creating aesthetically pleasing dashboards a breeze.</p>
<figure class="align-center ">
    <img loading="lazy" src="img/example-chronograf-dashboard.png#center"
         alt="Example Chronograf Dashboard"/> <figcaption>
            <p>Example Chronograf Dashboard</p>
        </figcaption>
</figure>

<p><a href="https://www.influxdata.com/time-series-platform/chronograf"><strong>Chronograf</strong></a> — an open source tool for interacting and visualising data from InfluxDB. Chronograf is very well suited for setups where other products from InfluxData are used, as it’s better integrated with them compared to Grafana. This could have been a great option if we also used <a href="https://www.influxdata.com/time-series-platform/kapacitor/">Kapacitor</a> as a real-time streaming data processing engine from InfluxData, to complete their “<a href="https://www.influxdata.com/blog/introduction-to-influxdatas-influxdb-and-tick-stack/">TICK</a>” stack.</p>
<p>Given that Chronograf has fewer features than Grafana and <a href="https://github.com/influxdata/chronograf/graphs/contributors">is significantly less popular</a>, which can make getting support for it more difficult, we went with Grafana.</p>
<h2 id="extra-considerations">Extra considerations<a hidden class="anchor" aria-hidden="true" href="#extra-considerations">#</a></h2>
<h3 id="why-deploy-in-docker">Why deploy in Docker?<a hidden class="anchor" aria-hidden="true" href="#why-deploy-in-docker">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="img/docker-logo.png#center"
         alt="Docker Logo"/> 
</figure>

<p>As all tools we chose provided official Docker images, we decided to deploy our monitoring infrastructure as a <a href="https://docs.docker.com/compose">Docker Compose</a> application in an Azure VM. This has many benefits:</p>
<ul>
<li>
<p>Deploying the monitoring infrastructure is a one-step process and is easily reproducible.</p>
</li>
<li>
<p>Updating and downgrading individual services is straightforward — just adjust the version of the Docker images!</p>
</li>
<li>
<p>It’s easy to manage each container’s data as it’s kept in separate Docker volumes.</p>
</li>
<li>
<p>The solution can be easily tested locally and will behave the same locally as on a production server.</p>
</li>
</ul>
<h3 id="securing-the-monitoring-infrastructure">Securing the monitoring infrastructure<a hidden class="anchor" aria-hidden="true" href="#securing-the-monitoring-infrastructure">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="img/traefik-logo.png#center"
         alt="Traefik Logo"/> 
</figure>

<p>To encrypt the traffic coming in and out of our monitoring infrastructure, we used <a href="https://docs.traefik.io/">Traefik</a> which can automatically renew and obtain TLS certificates for our monitoring infrastructure from <a href="https://letsencrypt.org">Let’s Encrypt</a>. Traefik is an open source edge router that acts as a reverse proxy for our Docker containers. It can be deployed using <a href="https://hub.docker.com/_/traefik">official Docker images</a>, so it integrates perfectly into our Docker Compose application.</p>
<p>We defined separate Traefik <a href="https://docs.traefik.io/routing/services/">services</a> and <a href="https://docs.traefik.io/routing/routers/">routers</a> for Grafana and InfluxDB that take care of appropriate routing, HTTP/HTTPS redirection, and TLS configuration. This was all done in a declarative way using <a href="https://docs.traefik.io/routing/providers/docker/">labels in our Docker compose file</a>.</p>
<p>Grafana supports <a href="https://grafana.com/docs/grafana/latest/auth/overview">user authentication</a>, which can be integrated with many different services including Azure and GitHub. This also allows for easy management of permissions of the users accessing our Grafana dashboards.</p>
<h3 id="deployment-of-telegraf">Deployment of Telegraf<a hidden class="anchor" aria-hidden="true" href="#deployment-of-telegraf">#</a></h3>
<p>Telegraf can be installed on the machines running Corda in a <a href="https://docs.influxdata.com/telegraf/latest/introduction/installation">variety of ways</a> and works as a stand-alone tool. Setting it up is relatively straightforward, so you can choose whichever installation method most suits your setup.</p>
<h2 id="complete-infrastructure-architecture">Complete infrastructure architecture<a hidden class="anchor" aria-hidden="true" href="#complete-infrastructure-architecture">#</a></h2>
<p>The complete architecture of our infrastructure looks as follows:</p>
<figure class="align-center ">
    <img loading="lazy" src="img/architecture-diagram.png#center"
         alt="Architecture Diagram"/> 
</figure>

<p>TLS is terminated at our reverse proxy (Traefik). This means that traffic between the proxy and Grafana/InfluxDB is not encrypted, but this isn’t an issue since all these services are running in a single secured machine.</p>
<h2 id="final-result">Final result<a hidden class="anchor" aria-hidden="true" href="#final-result">#</a></h2>
<p>We set up a Grafana dashboard with metrics for each Corda node in our cluster. The dashboard features high-level flow metrics first, followed by internal operation metrics (P2P, caches), and finally system-level metrics (JVM, disk IO, network). A part of this dashboard is shown below.</p>
<figure class="align-center ">
    <img loading="lazy" src="img/dashboard-1.png#center"
         alt="Dashboard 1"/> 
</figure>

<figure class="align-center ">
    <img loading="lazy" src="img/dashboard-2.png#center"
         alt="Dashboard 2"/> 
</figure>

<p>We also have a dashboard with a summary of the results from our performance testing suite, which helps us inspect the results quickly and identify potential regressions. A part of it that shows throughput numbers for some of our test cases is shown below. This is made possible by sending data from our test suite running JMeter to InfluxDB using the <a href="https://jmeter.apache.org/usermanual/realtime-results.html">JMeter InfluxDB Backend Listener</a>.</p>
<figure class="align-center ">
    <img loading="lazy" src="img/jmeter-results-dashboard.png#center"
         alt="JMeter Results Dashboard"/> 
</figure>

<p>The “Difference” column displays the results of a Flux query performed on our InfluxDB database, repeated for every test case using <a href="https://grafana.com/docs/grafana/latest/variables/repeat-panels-or-rows/">Grafana’s variable feature</a>. It calculates the difference in results of each test case between the currently specified run and a run that happened a certain time ago (in this example 24 hours ago).</p>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>A complete solution for monitoring Corda nodes can be set up entirely using open source tools without compromises. Many of the tools can be mixed and matched, so it’s possible to adjust the foundation described in this post to better fit your individual needs and existing setup.</p>
<p>One of the most impactful choices to be made when setting up a monitoring solution for Corda nodes is the choice of TSDB, as that will greatly affect the performance and usability of your dashboards. InfluxDB and Prometheus are strong TSDB options which have many discerning features that can make one more favourable over the other, depending on your requirements.</p>
<p>For more information on monitoring Corda nodes, check the following articles:</p>
<ul>
<li>
<p><a href="https://www.corda.net/blog/monitoring-corda-nodes-with-prometheus-grafana-and-elk-on-docker-2/">Monitoring Corda Nodes With Prometheus, Grafana and ELK on Docker</a></p>
</li>
<li>
<p><a href="https://www.corda.net/blog/monitoring-corda-nodes-using-prometheus-and-grafana/">Monitoring Corda Nodes using Prometheus and Grafana</a></p>
</li>
<li>
<p><a href="https://www.corda.net/blog/monitoring-corda-nodes-part-1/">Monitoring Corda Nodes (Part 1)</a></p>
</li>
</ul>
<p>The Corda documentation is also an amazing resource:</p>
<ul>
<li>
<p><a href="https://docs.corda.net/docs/corda-enterprise/node-metrics.html">Node metrics</a></p>
</li>
<li>
<p><a href="https://docs.corda.net/docs/corda-enterprise/node/operating/monitoring-logging.html">Node monitoring and logging</a></p>
</li>
</ul>
<p><strong>Want to learn more about building awesome blockchain applications on Corda? Be sure to visit <a href="http://corda.net/">corda.net</a>, check out our <a href="https://www.corda.net/community/">community page</a> to learn how to connect with other Corda developers, and <a href="https://info.r3.com/email-preferences">sign up</a> for one of our newsletters for the latest updates.</strong></p>
<p>— Dominik Rys is a Software Engineer Intern at <a href="https://www.r3.com/">R3</a>, an enterprise blockchain software firm working with a global ecosystem of more than 350 participants across multiple industries from both the private and public sectors to develop on Corda, its open source blockchain platform, and Corda Enterprise, a commercial version of Corda for enterprise usage.</p>


  </div>
  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://dominikrys.com/tags/devops/">devops</a></li>
      <li><a href="https://dominikrys.com/tags/security/">security</a></li>
      <li><a href="https://dominikrys.com/tags/docker/">docker</a></li>
      <li><a href="https://dominikrys.com/tags/influxdb/">influxdb</a></li>
      <li><a href="https://dominikrys.com/tags/grafana/">grafana</a></li>
      <li><a href="https://dominikrys.com/tags/traefik/">traefik</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://dominikrys.com/posts/secure-monitoring-solution-docker/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Setting up a TLS-Secured Monitoring Solution in Docker using InfluxDB, Grafana and Traefik</span>
  </a>
  <a class="next" href="https://dominikrys.com/posts/compiling-chip8-to-wasm/">
    <span class="title">Next Page »</span>
    <br>
    <span>Compiling a C&#43;&#43; CHIP-8 Emulator to WebAssembly</span>
  </a>
</nav>

<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf on twitter"
        href="https://twitter.com/intent/tweet/?text=Monitoring%20Corda%20Nodes%20Using%20Grafana%2c%20InfluxDB%2c%20and%20Telegraf&amp;url=https%3a%2f%2fdominikrys.com%2fposts%2fmonitoring-corda-nodes%2f&amp;hashtags=devops%2csecurity%2cdocker%2cinfluxdb%2cgrafana%2ctraefik">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdominikrys.com%2fposts%2fmonitoring-corda-nodes%2f&amp;title=Monitoring%20Corda%20Nodes%20Using%20Grafana%2c%20InfluxDB%2c%20and%20Telegraf&amp;summary=Monitoring%20Corda%20Nodes%20Using%20Grafana%2c%20InfluxDB%2c%20and%20Telegraf&amp;source=https%3a%2f%2fdominikrys.com%2fposts%2fmonitoring-corda-nodes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fdominikrys.com%2fposts%2fmonitoring-corda-nodes%2f&title=Monitoring%20Corda%20Nodes%20Using%20Grafana%2c%20InfluxDB%2c%20and%20Telegraf">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdominikrys.com%2fposts%2fmonitoring-corda-nodes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf on whatsapp"
        href="https://api.whatsapp.com/send?text=Monitoring%20Corda%20Nodes%20Using%20Grafana%2c%20InfluxDB%2c%20and%20Telegraf%20-%20https%3a%2f%2fdominikrys.com%2fposts%2fmonitoring-corda-nodes%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf on telegram"
        href="https://telegram.me/share/url?text=Monitoring%20Corda%20Nodes%20Using%20Grafana%2c%20InfluxDB%2c%20and%20Telegraf&amp;url=https%3a%2f%2fdominikrys.com%2fposts%2fmonitoring-corda-nodes%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    this.page.url = 'https:\/\/dominikrys.com\/posts\/monitoring-corda-nodes\/';
    this.page.identifier = 'https:\/\/dominikrys.com\/posts\/monitoring-corda-nodes\/';
    this.page.title = 'Monitoring Corda Nodes Using Grafana, InfluxDB, and Telegraf';
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "dominikrys" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>
    </main>
    <footer class="footer">
    <span>&copy; 2021 <a href="https://dominikrys.com">Dominik Rys</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
